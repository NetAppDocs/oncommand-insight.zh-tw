---
sidebar: sidebar 
permalink: task_config_telegraf_kubernetes.html 
keywords: telegraf, installation, install, kubernetes 
summary: Kubernetes資料收集器組態 
---
= Kubernetes資料收集器
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
使用此資料收集器來收集Kubernetes Pod、Node和Container指標。Cloud Insights



== 安裝

如需Kubernetes安裝說明、請參閱 link:task_config_telegraf_agent.html#kubernetes["代理程式安裝"] 頁面。


NOTE: 關於* kube狀態指標*的資訊已移至 link:task_config_telegraf_agent.html#kubernetes["代理程式安裝"] 頁面。



== 物件與計數器

收集下列物件及其計數器：

[cols="<.<,<.<,<.<,<.<"]
|===
| 物件： | 識別碼： | 屬性： | 資料點： 


| Kubernetes Container | 命名空間
Pod
容器
叢集 | Kubernetes節點
節點名稱
節點作業系統
節點UUID
節點 IP | CPU 納秒
CPU 使用率 Nanocores
記憶體主要頁面錯誤
記憶體駐留集大小（ RSS ）
記憶體工作集
記憶體分頁錯誤
記憶體使用量
可用的根檔案系統
根檔案系統容量
使用的根檔案系統 


| Kubernetes節點 | Kubernetes節點
叢集 | 節點名稱
節點作業系統
節點UUID
節點 IP | CPU 使用率 Nanocores
CPU 使用量（納秒）
檔案系統可用
檔案系統總計
使用的檔案系統
可用記憶體
記憶體使用量
記憶體主要頁面錯誤
記憶體分頁錯誤
記憶體駐留集大小（ RSS ）
記憶體工作集
網路 RX 錯誤（每秒）
網路 RX 位元組（每秒）
網路 TX 錯誤（每秒）
網路 TX 位元組（每秒）
可用的執行階段映像檔案系統
使用執行階段影像檔案系統
執行階段映像檔案系統容量 


| Kubernetes Pod | 命名空間
Pod
叢集 | Kubernetes節點
節點名稱
節點 IP
節點作業系統
節點UUID | 網路 TX 位元組（每秒）
網路 TX 錯誤（每秒）
網路 RX 位元組（每秒）
網路 RX 錯誤（每秒） 


| Kubernetes Pod Volume | Volume
Pod
叢集
命名空間 | Kubernetes節點
節點名稱
節點UUID
節點 IP
節點作業系統 | 可用
容量
已使用 


| Kubernetes系統Container | 系統容器
Kubernetes節點
叢集 | 節點名稱
節點 IP
節點作業系統
節點UUID | CPU 使用率 Nanocores
CPU 使用量核心（ nanoseconds ）
記憶體主要頁面錯誤
記憶體分頁錯誤
記憶體駐留集大小（ RSS ）
記憶體使用量
記憶體工作集
可用的根檔案系統
根檔案系統容量
記錄可用的檔案系統
記錄檔案系統容量 
|===


== 疑難排解

[cols="2*"]
|===
| 問題： | 試用： 


| 我執行了 Kubernetes 代理程式安裝程式命令、但看不到 Telegraf 代理程式 Pod 透過下列方式執行：

 sudo kubectl --namespace CI-Monitoring Get Pod | 檢查部署示範集時是否發生任何錯誤：

 Sudo kubectl --namespace CI-Monitoring 說明 DS Telegraf-DS

如果出現與 SecurityContextConstraints 相關的錯誤、請執行下列步驟：

1. 製作 Telegraf 示範 YAML

 Sudo kubectl --namespace CI-Monitoring Get DS telegraf-DS -o yaml > /tmp/telegraf-ds.yaml

2. 停止 Telegraf 服務

 Sudo kubectl --namespace CI-Monitoring 刪除 DS telegraf-DS

3. 建立必要的 SecurityContextConstraint （請參閱「設定代理程式以收集資料」一節）

4. 重新建立 Telegraf 示範集 


| 我將Telegraf設定為取得Kubernetes叢集的相關資訊、但Cloud Insights 在這個過程中卻看不到任何資訊。我在我設定的Kubernetes輸入外掛程式相關的Telegraf記錄檔中看到「無效的標頭欄位值」錯誤。 | 請確定參考的bear_token檔案沒有結尾的換行字元。若要驗證、請執行下列命令、並確認傳回 0 ：

 tail -C1 <bearer_token_file> 
|===
如需其他資訊、請參閱 link:concept_requesting_support.html["支援"] 頁面。
