---
sidebar: sidebar 
permalink: task_config_telegraf_flink.html 
keywords: telegraf, installation, install, flink 
summary: Flink資料收集器組態 
---
= Flink Data Collector
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
使用此資料收集器從Flink收集指標。Cloud Insights



== 安裝

. 從 * 可伺服 > 收集器 * 、按一下 * + 資料收集器 * 。選擇 Flink 。
+
選取安裝Telegraf代理程式的作業系統或平台。

. 如果您尚未安裝代理程式以供收集、或想要為不同的作業系統或平台安裝代理程式、請按一下「_顯示指示_」以展開 link:task_config_telegraf_agent.html["代理程式安裝"] 說明。
. 選取要搭配此資料收集器使用的代理程式存取金鑰。您可以按一下「*+代理程式存取金鑰*」按鈕來新增代理存取金鑰。最佳實務做法：只有當您想要將資料收集器分組時、才使用不同的代理程式存取金鑰、例如依作業系統/平台。
. 請依照組態步驟設定資料收集器。這些指示會因您用來收集資料的作業系統或平台類型而有所不同。


image:FlinkDCConfigWindows.png["Flink組態"]



== 設定

完整的Flink部署包含下列元件：

JobManager：Flink主要系統。協調一系列的工作管理員。在高可用度設定中、系統會有多個JobManager。
TaskManager：這是執行Flink運算子的位置。
Flink外掛程式是以Telewraf的Jolokia外掛程式為基礎。例如、需要從所有Flink元件收集資訊、需要在所有元件上透過Jolokia進行設定和公開。



=== 相容性

組態是根據Flink 1.5.0版開發而成。



=== 設定



==== Jolokia代理程式Jar

對於所有個別元件、必須下載Jolokia代理程式Jar檔案的版本。測試版本為 link:https://jolokia.org/download.html["約洛基亞代理商1.6.0"]。

以下說明假設下載的Jar檔案（jolokia -jvm-1.6.0-agent.jar）位於「/opt / flink/lib/」位置。



==== JobManager

若要將JobManager設定為公開Jolokia API、您可以在節點上設定下列環境變數、然後重新啟動JobManager：

 export FLINK_ENV_JAVA_OPTS="-javaagent:/opt/flink/lib/jolokia-jvm-1.6.0-agent.jar=port=8778,host=0.0.0.0"
您可以為Jolokia選擇不同的連接埠（8778）。如果您有內部IP來鎖定Jolokia、您可以用自己的IP來取代「全部抓出」0．0．0。請注意、此IP必須從遠端工作人員外掛程式存取。



==== 工作管理員

若要設定「工作管理員」以顯示「Jolokia API」、您可以在節點上設定下列環境變數、然後重新啟動「工作管理員」：

 export FLINK_ENV_JAVA_OPTS="-javaagent:/opt/flink/lib/jolokia-jvm-1.6.0-agent.jar=port=8778,host=0.0.0.0"
您可以為Jolokia選擇不同的連接埠（8778）。如果您有內部IP來鎖定Jolokia、您可以用自己的IP來取代「全部抓出」0．0．0。請注意、此IP必須從遠端工作人員外掛程式存取。



== 物件與計數器

收集下列物件及其計數器：

[cols="<.<,<.<,<.<,<.<"]
|===
| 物件： | 識別碼： | 屬性： | 資料點： 


| Flink工作管理員 | 叢集
命名空間
伺服器 | 節點名稱
工作管理員 ID
節點 IP | 網路可用記憶體區段
網路總記憶體區段
垃圾回收 PS MarkSweep Count
垃圾回收 PS MarkSweep 時間
垃圾回收 PS Scavenge 計數
垃圾回收 PS Scavenge 時間
堆積記憶體已認可
堆積記憶體初始化
堆積記憶體上限
使用的堆積記憶體
執行緒計數精靈
執行緒計數尖峰
執行緒計數
執行緒總數已開始 


| Flink工作 | 叢集
命名空間
伺服器
工作ID | 節點名稱
工作名稱
節點 IP
上次檢查點外部路徑
重新啟動時間 | 停機
完全重新啟動
上次檢查點對齊緩衝
上次檢查點持續時間
上次檢查點大小
已完成的檢查點數目
失敗的檢查點數目
進行中的檢查點數目
檢查點數量
正常運作時間 


| Flink工作管理員 | 叢集
命名空間
伺服器 | 節點名稱
節點 IP | 垃圾回收 PS MarkSweep Count
垃圾回收 PS MarkSweep 時間
垃圾回收 PS Scavenge 計數
垃圾回收 PS Scavenge 時間
堆積記憶體已認可
堆積記憶體初始化
堆積記憶體上限
使用的堆積記憶體
已註冊的工作經理人數
執行中工作的數目
可用的工作插槽
工作插槽總數
執行緒計數精靈
執行緒計數尖峰
執行緒計數
執行緒總數已開始 


| Flink工作 | 叢集
命名空間
工作ID
工作ID | 伺服器
節點名稱
工作名稱
子工作索引
工作嘗試 ID
工作嘗試次數
工作名稱
工作管理員 ID
節點 IP
目前輸入浮水印 | 集區使用量中的緩衝區
佇列長度中的緩衝區
緩衝資源池使用率
緩衝超出佇列長度
本機緩衝區數目
每秒本地數量的緩衝數
每秒本機緩衝區數
遠端中的緩衝區數目
遠端每秒緩衝區數
遠端每秒傳輸速率中的緩衝區數目
Number Buffers Out
每秒緩衝區輸出數
每秒緩衝區輸出數
本機的位元組數
每秒本機數的位元組數
每秒本機傳輸率的位元組數
遠端中的位元組數
每秒遠端計數中的位元組數
遠端每秒傳輸速率中的位元組數
輸出位元組數
每秒輸出數位元組數
每秒輸出的位元組數
中的記錄數
每秒記錄數
每秒記錄數
號碼記錄輸出
每秒輸出的記錄數
每秒輸出次數記錄 


| Flink工作操作員 | 叢集
命名空間
工作ID
營運者 ID
工作ID | 伺服器
節點名稱
工作名稱
營運者名稱
子工作索引
工作嘗試 ID
工作嘗試次數
工作名稱
工作管理員 ID
節點 IP | 目前輸入浮水印
目前輸出浮水印
中的記錄數
每秒記錄數
每秒記錄數
號碼記錄輸出
每秒輸出的記錄數
每秒輸出次數記錄
遺失的延遲記錄數
指派的分割區
位元組使用率
平均提交延遲
最大提交延遲
提交率
認可失敗
認可成功
連線關閉率
連線計數
連線建立率
數
平均擷取延遲
擷取最長延遲
擷取速率
平均擷取大小
擷取大小上限
平均擷取節流時間
擷取最大節流時間
心跳速率
傳入位元組速率
IO 比率
IO 時間平均（ ns ）
IO 等待比率
IO 平均等待時間（ ns ）
加入率
平均加入時間
上一次心跳前
網路 IO 速率
傳出位元組速率
記錄使用率
記錄延遲上限
每個要求的記錄平均
要求率
平均要求大小
要求大小上限
回應率
選擇速率
同步速度
平均同步時間
活動訊號回應時間上限
最長加入時間
同步時間上限 
|===


== 疑難排解

如需其他資訊、請參閱 link:concept_requesting_support.html["支援"] 頁面。
