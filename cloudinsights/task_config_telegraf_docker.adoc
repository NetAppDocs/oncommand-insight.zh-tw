---
sidebar: sidebar 
permalink: task_config_telegraf_docker.html 
keywords: telegraf, installation, install, docker 
summary: Docker資料收集器組態 
---
= Docker Data Collector
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
使用此資料收集器從Docker收集指標。Cloud Insights



== 安裝

. 從 * 可伺服 > 收集器 * 、按一下 * + 資料收集器 * 。選擇 Docker 。
+
如果您尚未設定收集的值機員、系統會提示您 link:task_config_telegraf_agent.html["安裝代理程式"] 在您的環境中。

+
如果您已設定代理程式、請選取適當的作業系統或平台、然後按一下*繼續*。

. 請依照Docker組態畫面中的指示來設定資料收集器。這些指示會因您用來收集資料的作業系統或平台類型而有所不同。


image:DockerDCConfigLinux.png["Docker組態"]



== 設定

適用於Docker的Telegraf輸入外掛程式會透過指定的UNIX通訊端或TCP端點收集度量資料。



=== 相容性

組態是根據Docker 1.12.6版開發而成。



=== 設定



=== 透過UNIX套接字存取Docker

如果Telegraf代理程式是在裸機上執行、請執行下列命令、將Telegraf Unix使用者新增至Docker Unix群組：

 sudo usermod -aG docker telegraf
如果Telegraf代理程式是在Kubernetes Pod內執行、請將套接字對應至Pod中的Volume、然後將該磁碟區安裝至/var/run / Docker。  例如、將下列項目新增至Podcast規格：

[listing]
----
volumes:
...
- name: docker-sock
hostPath:
path: /var/run/docker.sock
type: File
----
然後、將下列項目新增至Container：

[listing]
----
volumeMounts:
...
- name: docker-sock
mountPath: /var/run/docker.sock
----
請注意Cloud Insights 、Kubernetes平台所提供的支援程序會自動處理此對應作業。



=== 透過TCP端點存取Docker

根據預設、Docker會使用連接埠2375進行未加密存取、而連接埠2376則用於加密存取。



== 物件與計數器

收集下列物件及其計數器：

[cols="<.<,<.<,<.<,<.<"]
|===
| 物件： | 識別碼： | 屬性： | 資料點： 


| Docker引擎 | 命名空間
Docker引擎 | 節點名稱
節點 IP
節點UUID
節點作業系統
Kubernetes 叢集
Docker 版本
單位 | 記憶體
容器
容器已暫停
執行中的容器
容器已停止
CPU
Go 例行訓練
映像
接聽程式事件
使用的檔案描述元
可用資料
資料總計
使用的資料
可用的中繼資料
中繼資料總計
使用的中繼資料
Pool Blocksize 


| Docker Container | 命名空間
容器名稱
Docker引擎 | Kubernetes Container 雜湊
Kubernetes Container 連接埠
Kubernetes Container 重新啟動計數
Kubernetes Container 終止訊息路徑
Kubernetes Container 終止訊息原則
Kubernetes Pod 終止寬限期
Container 映像
容器狀態
Container 版本
節點名稱
Kubernetes Container 記錄路徑
Kubernetes Container 名稱
Kubernetes Docker 類型
Kubernetes Pod 名稱
Kubernetes Pod 命名空間
Kubernetes Pod UID
Kubernetes 沙箱 ID
節點 IP
節點UUID
Docker 版本
Kubernetes IO 組態已見
Kubernetes IO 組態來源
OpenShift IO SCC
Kubernetes 說明
Kubernetes 顯示名稱
OpenShift 標記
Kom擺 式服務
Pod 範本雜湊
控制器修訂雜湊
產生 Pod 範本
授權
架構建置日期
架構授權
架構名稱
架構 URL
架構 VCS URL
架構廠商
架構版本
架構架構版本
維護人員
客戶 Pod
Kubernetes StatefulSet Pod 名稱
租戶
WebCONSOLE
架構
授權來源 URL
建置日期
RH Build Host
RH 元件
發佈範圍
安裝
版本
執行
摘要
解除安裝
VCS 參考
VCS 類型
廠商
版本
健全狀況狀態
容器 ID | Active Anonymous 記憶體
記憶體作用中檔案
記憶體快取
記憶體階層限制
Memory Inactive Anonymous
記憶體非使用中檔案
記憶體限制
記憶體對應檔案
記憶體最大使用量
記憶體分頁錯誤
記憶體分頁主要故障
記憶體分頁
記憶體分頁
記憶體駐留集大小
記憶體駐留集大小龐大
Active Anonymous 總記憶體數
記憶體作用中檔案總計
記憶體總快取
未啟用的匿名記憶體總數
記憶體非使用中檔案總計
記憶體對應檔案總計
記憶體總頁面錯誤
記憶體總頁數主要錯誤
記憶體分頁總容量
記憶體分頁總容量
記憶體總駐留集大小
記憶體總駐留集大小龐大
記憶體總容量
記憶體更新
記憶體使用量
記憶體使用量百分比
結束代碼
Oom 死亡
PID
開始於
失敗的 Streak 


| Docker Container IO | 命名空間
容器名稱
裝置
Docker引擎 | Kubernetes Container 雜湊
Kubernetes Container 連接埠
Kubernetes Container 重新啟動計數
Kubernetes Container 終止訊息路徑
Kubernetes Container 終止訊息原則
Kubernetes Pod 終止寬限期
Container 映像
容器狀態
Container 版本
節點名稱
Kubernetes Container 記錄路徑
Kubernetes Container 名稱
Kubernetes Docker 類型
Kubernetes Pod 名稱
Kubernetes Pod 命名空間
Kubernetes Pod UID
Kubernetes 沙箱 ID
節點 IP
節點UUID
Docker 版本
Kubernetes 組態已見
Kubernetes 組態來源
OpenShift SCC
Kubernetes 說明
Kubernetes 顯示名稱
OpenShift 標記
架構架構版本
Pod 範本雜湊
控制器修訂雜湊
產生 Pod 範本
Kom擺 式服務
架構建置日期
架構授權
架構名稱
架構廠商
客戶 Pod
Kubernetes StatefulSet Pod 名稱
租戶
WebCONSOLE
建置日期
授權
廠商
架構
授權來源 URL
RH Build Host
RH 元件
發佈範圍
安裝
維護人員
版本
執行
摘要
解除安裝
VCS 參考
VCS 類型
版本
架構 URL
架構 VCS URL
架構版本
容器 ID | IO 服務位元組遞迴非同步
IO 服務位元組遞迴讀取
IO 服務位元組遞迴同步
IO 服務位元組遞歸總計
IO 服務位元組遞迴寫入
IO 服務式遞迴非同步
IO 服務式遞迴讀取
IO 服務式遞迴同步
IO 服務式遞迴總計
IO 服務式遞迴寫入 


| Docker Container Network | 命名空間
容器名稱
網路
Docker引擎 | Container 映像
容器狀態
Container 版本
節點名稱
節點 IP
節點UUID
節點作業系統
K8s 叢集
Docker 版本
容器 ID | Rx 已捨棄
Rx 位元組
Rx 錯誤
Rx 封包
傳輸中斷
傳輸位元組
Tx 錯誤
Tx 封包 


| Docker Container CPU | 命名空間
容器名稱
CPU
Docker引擎 | Kubernetes Container 雜湊
Kubernetes Container 連接埠
Kubernetes Container 重新啟動計數
Kubernetes Container 終止訊息路徑
Kubernetes Container 終止訊息原則
Kubernetes Pod 終止寬限期
Kubernetes 組態已見
Kubernetes 組態來源
OpenShift SCC
Container 映像
容器狀態
Container 版本
節點名稱
Kubernetes Container 記錄路徑
Kubernetes Container 名稱
Kubernetes Docker 類型
Kubernetes Pod 名稱
Kubernetes Pod 命名空間
Kubernetes Pod UID
Kubernetes 沙箱 ID
節點 IP
節點UUID
節點作業系統
Kubernetes 叢集
Docker 版本
Kubernetes 說明
Kubernetes 顯示名稱
OpenShift 標記
架構版本
Pod 範本雜湊
控制器修訂雜湊
產生 Pod 範本
Kom擺 式服務
架構建置日期
架構授權
架構名稱
架構廠商
客戶 Pod
Kubernetes StatefulSet Pod 名稱
租戶
WebCONSOLE
建置日期
授權
廠商
架構
授權來源 URL
RH Build Host
RH 元件
發佈範圍
安裝
維護人員
版本
執行
摘要
解除安裝
VCS 參考
VCS 類型
版本
架構 URL
架構 VCS URL
架構版本
容器 ID | 節流期間
節流節流期間
節流節流時間
核心模式的使用
使用者模式
使用率百分比
使用系統
使用量總計 
|===


== 疑難排解

[cols="2*"]
|===
| 問題： | 試用： 


| 依照組態頁面上的指示、我看不到Cloud Insights Docker指標。 | 檢查 Telegraf 值機員記錄、查看是否報告下列錯誤：

 好！外掛程式錯誤 [Inputs.泊 塢視窗 ] ：嘗試連線至 Docker 常駐程式套接字時、取得權限遭拒

如果有、請採取必要步驟、讓 Telegraf 代理程式存取如上所述的 Docker Unix 插槽。 
|===
如需其他資訊、請參閱 link:concept_requesting_support.html["支援"] 頁面。
